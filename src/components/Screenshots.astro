
---
// Screenshots gallery section - organized in workflow order
const screenshots = [
  {
    src: "/github-loader-cropped.png",
    alt: "GitHub import modal showing file tree with selected React hooks and lazy loading files",
    caption: "1. Select Files from GitHub"
  },
  {
    src: "/pregen-cropped.png",
    alt: "Ready to generate panel with Quick Start checklist",
    caption: "2. Multi-File Workspace"
  },
  {
    src: "/ingen-cropped.png",
    alt: "Real-time documentation generation with streaming progress",
    caption: "3. Generate Documentation"
  },
  {
    src: "/quality-cropped.png",
    alt: "Quality scoring breakdown with A-F grades across 5 criteria",
    caption: "4. Quality Scoring Analysis"
  },
  {
    src: "/batch-summary-cropped.png",
    alt: "Batch documentation summary with statistics and results",
    caption: "5. Batch Summary Results"
  },
  {
    src: "/mermaid-cropped.png",
    alt: "Architecture diagrams showing data flow and hook resolution",
    caption: "6. Architecture Diagrams"
  },
  {
    src: "/final-doc-cropped.png",
    alt: "Final rendered documentation with project overview and features",
    caption: "7. Final Documentation"
  }
];
---

<section class="py-20 sm:py-24 bg-slate-900">
  <div class="max-w-7xl mx-auto px-6">
    <div class="text-center max-w-3xl mx-auto mb-16">
      <h2 class="text-4xl sm:text-5xl font-bold text-white mb-4">
        From GitHub to Docs in <span class="text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-purple-300">7 Simple Steps</span>
      </h2>
      <p class="text-lg text-slate-400">
        Real screenshots showing your complete documentation workflow from import to publish
      </p>
    </div>

    <!-- Carousel Container -->
    <div class="relative">
      <!-- Previous Arrow -->
      <button
        id="prev-btn"
        class="absolute left-4 top-1/2 -translate-y-1/2 z-10 w-12 h-12 bg-slate-800/90 hover:bg-purple-500 border border-slate-600 rounded-full flex items-center justify-center transition-all duration-200 shadow-lg"
        aria-label="Previous screenshot"
      >
        <svg class="w-6 h-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
        </svg>
      </button>

      <!-- Next Arrow -->
      <button
        id="next-btn"
        class="absolute right-4 top-1/2 -translate-y-1/2 z-10 w-12 h-12 bg-slate-800/90 hover:bg-purple-500 border border-slate-600 rounded-full flex items-center justify-center transition-all duration-200 shadow-lg"
        aria-label="Next screenshot"
      >
        <svg class="w-6 h-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
        </svg>
      </button>

      <!-- Screenshots Carousel with peek views -->
      <div id="carousel" class="flex gap-4 sm:gap-6 overflow-x-auto scroll-smooth snap-x snap-mandatory pb-8 scrollbar-hide px-[5%] sm:px-[10%]">
        {screenshots.map((screenshot, index) => (
          <div class="carousel-slide flex-shrink-0 w-[90%] sm:w-[80%] snap-center transition-all duration-300">
            <div class="group relative">
              <!-- Step Indicator -->
              <div class="absolute top-4 left-4 z-10 flex items-center gap-2 px-3 py-1.5 bg-slate-900/80 backdrop-blur-sm border border-slate-700 rounded-lg">
                <div class="flex items-center gap-1.5">
                  <div class="w-2 h-2 rounded-full bg-purple-400"></div>
                  <span class="text-xs font-semibold text-slate-200">Step {index + 1} of {screenshots.length}</span>
                </div>
              </div>

              <div class="relative rounded-xl overflow-hidden border border-slate-700 shadow-lg hover:shadow-2xl transition-all duration-300">
                <img
                  src={screenshot.src}
                  alt={screenshot.alt}
                  class="w-full max-h-[400px] sm:max-h-[600px] object-contain transition-all duration-300 group-hover:brightness-110"
                  loading="lazy"
                />
              </div>
              <p class="mt-4 text-center text-sm font-medium text-slate-300">
                {screenshot.caption}
              </p>
            </div>
          </div>
        ))}
      </div>

      <!-- Navigation Dots -->
      <div class="flex justify-center gap-2 mt-4">
        {screenshots.map((_, index) => (
          <button
            class="dot w-2 h-2 rounded-full bg-slate-600 hover:bg-purple-400 transition-colors"
            data-index={index}
            aria-label={`Go to screenshot ${index + 1}`}
          />
        ))}
      </div>
    </div>

    <script>
      const carousel = document.getElementById('carousel');
      const prevBtn = document.getElementById('prev-btn');
      const nextBtn = document.getElementById('next-btn');
      const dots = document.querySelectorAll('.dot');
      const slides = document.querySelectorAll('.carousel-slide');

      let currentIndex = 0;
      const totalSlides = dots.length;

      function getCurrentSlideIndex() {
        if (!carousel || !slides.length) return 0;

        // Find which slide is closest to the center of the viewport
        const carouselRect = carousel.getBoundingClientRect();
        const carouselCenter = carouselRect.left + carouselRect.width / 2;

        let closestIndex = 0;
        let closestDistance = Infinity;

        slides.forEach((slide, index) => {
          const slideRect = slide.getBoundingClientRect();
          const slideCenter = slideRect.left + slideRect.width / 2;
          const distance = Math.abs(slideCenter - carouselCenter);

          if (distance < closestDistance) {
            closestDistance = distance;
            closestIndex = index;
          }
        });

        return closestIndex;
      }

      function scrollToSlide(index) {
        if (carousel && slides.length > 0) {
          const slide = slides[index];
          if (slide) {
            slide.scrollIntoView({
              behavior: 'smooth',
              block: 'nearest',
              inline: 'center'
            });
          }
        }
      }

      function updateDots() {
        dots.forEach((dot, index) => {
          if (index === currentIndex) {
            dot.classList.remove('bg-slate-600');
            dot.classList.add('bg-purple-400');
          } else {
            dot.classList.remove('bg-purple-400');
            dot.classList.add('bg-slate-600');
          }
        });
      }

      function updateCarousel() {
        currentIndex = getCurrentSlideIndex();
        updateDots();
      }

      // Update on scroll
      carousel?.addEventListener('scroll', () => {
        updateCarousel();
      });

      prevBtn?.addEventListener('click', () => {
        if (currentIndex > 0) {
          scrollToSlide(currentIndex - 1);
        }
      });

      nextBtn?.addEventListener('click', () => {
        if (currentIndex < totalSlides - 1) {
          scrollToSlide(currentIndex + 1);
        }
      });

      dots.forEach((dot, index) => {
        dot.addEventListener('click', () => {
          scrollToSlide(index);
        });
      });

      // Initialize
      updateCarousel();
    </script>

    <style>
      .scrollbar-hide::-webkit-scrollbar {
        display: none;
      }
      .scrollbar-hide {
        -ms-overflow-style: none;
        scrollbar-width: none;
      }

      /* All slides at full brightness */
      .carousel-slide {
        opacity: 1;
        transform: scale(1);
      }
    </style>
  </div>
</section>
