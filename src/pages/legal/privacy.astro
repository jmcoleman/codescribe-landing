---
import BaseLayout from '../../layouts/BaseLayout.astro';
import '../../styles/global.css';

const PRIVACY_VERSION = '2025-11-02';
const EFFECTIVE_DATE = 'November 2, 2025';
const title = 'Privacy Policy - CodeScribe AI';
const description = 'CodeScribe AI Privacy Policy - Learn how we collect, use, and protect your data.';
---

<BaseLayout title={title} description={description}>
  <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 pt-12 pb-12">
    <div class="bg-white dark:bg-slate-800 rounded-xl shadow-lg ring-1 ring-slate-200 dark:ring-slate-700 p-8 sm:p-12">
      <!-- Title -->
      <h1 class="text-4xl font-bold text-slate-900 dark:text-slate-100 mb-2">
        Privacy Policy
      </h1>
      <p class="text-slate-600 dark:text-slate-400 mb-8">
        <strong class="text-slate-900 dark:text-slate-100">Effective Date:</strong> {EFFECTIVE_DATE} | <strong class="text-slate-900 dark:text-slate-100">Version:</strong> {PRIVACY_VERSION}
      </p>

      <!-- Introduction -->
      <section class="mb-8 prose dark:prose-invert prose-slate max-w-none">
        <p class="text-lg text-slate-700 dark:text-slate-300 leading-relaxed">
          At CodeScribe AI, we take your privacy seriously. This Privacy Policy explains how we collect, use, disclose,
          and safeguard your information when you use our service.
        </p>
      </section>

      <!-- 1. Information We Collect -->
      <section class="mb-8">
        <h2 class="text-2xl font-bold text-slate-900 dark:text-slate-100 mb-4">1. Information We Collect</h2>

        <h3 class="text-xl font-semibold text-slate-900 dark:text-slate-100 mt-6 mb-3">1.1 Account Information</h3>
        <div class="prose dark:prose-invert prose-slate max-w-none text-slate-700 dark:text-slate-300">
          <p>When you create an account, we collect:</p>
          <ul class="space-y-2">
            <li><strong class="text-slate-900 dark:text-slate-100">Email address:</strong> Used for authentication and communication</li>
            <li><strong class="text-slate-900 dark:text-slate-100">Password:</strong> Stored as a secure hash (bcrypt with 10 salt rounds)</li>
            <li><strong class="text-slate-900 dark:text-slate-100">Name:</strong> Optional, collected during signup or later for subscription management</li>
            <li><strong class="text-slate-900 dark:text-slate-100">GitHub ID:</strong> If you sign up via GitHub OAuth</li>
            <li><strong class="text-slate-900 dark:text-slate-100">Subscription tier:</strong> Free, Starter, Pro, Team, or Enterprise</li>
            <li><strong class="text-slate-900 dark:text-slate-100">Account creation date:</strong> Timestamp of account creation</li>
          </ul>
        </div>

        <h3 class="text-xl font-semibold text-slate-900 dark:text-slate-100 mt-6 mb-3">1.2 Usage Data</h3>
        <div class="prose dark:prose-invert prose-slate max-w-none text-slate-700 dark:text-slate-300">
          <p>To enforce usage limits and improve our service, we collect:</p>
          <ul class="space-y-2">
            <li><strong class="text-slate-900 dark:text-slate-100">Documentation generation count:</strong> Number of documents generated (daily and monthly)</li>
            <li><strong class="text-slate-900 dark:text-slate-100">IP address (anonymous users only):</strong> Used to track usage for non-authenticated users</li>
            <li><strong class="text-slate-900 dark:text-slate-100">User ID (authenticated users):</strong> Linked to your account for usage tracking</li>
            <li><strong class="text-slate-900 dark:text-slate-100">Last reset date:</strong> When your usage counters were last reset</li>
          </ul>
          <p class="mt-4">
            <strong class="text-slate-900 dark:text-slate-100">Important:</strong> Your code and generated documentation are <strong class="text-slate-900 dark:text-slate-100">NOT stored</strong>. All code
            processing happens in memory only, and results are sent directly to your browser.
          </p>
        </div>

        <h3 class="text-xl font-semibold text-slate-900 dark:text-slate-100 mt-6 mb-3">1.3 Payment Information</h3>
        <div class="prose dark:prose-invert prose-slate max-w-none text-slate-700 dark:text-slate-300">
          <p>
            When you subscribe to a paid tier, we use Stripe to process payments. We collect:
          </p>
          <ul class="space-y-2">
            <li><strong class="text-slate-900 dark:text-slate-100">Stripe Customer ID:</strong> Unique identifier linking your account to Stripe</li>
            <li><strong class="text-slate-900 dark:text-slate-100">Subscription ID:</strong> Identifier for your active subscription</li>
            <li><strong class="text-slate-900 dark:text-slate-100">Subscription status:</strong> Active, canceled, past_due, etc.</li>
            <li><strong class="text-slate-900 dark:text-slate-100">Current period dates:</strong> Billing cycle start and end dates</li>
          </ul>
          <p class="mt-4">
            <strong class="text-slate-900 dark:text-slate-100">We do not store your credit card information.</strong> All payment details are securely stored by Stripe.
            We only receive non-sensitive payment information necessary to manage your subscription.
          </p>
        </div>

        <h3 class="text-xl font-semibold text-slate-900 dark:text-slate-100 mt-6 mb-3">1.4 Automatically Collected Information</h3>
        <div class="prose dark:prose-invert prose-slate max-w-none text-slate-700 dark:text-slate-300">
          <ul class="space-y-2">
            <li><strong class="text-slate-900 dark:text-slate-100">Browser type and version:</strong> For compatibility and analytics</li>
            <li><strong class="text-slate-900 dark:text-slate-100">Operating system:</strong> For compatibility</li>
            <li><strong class="text-slate-900 dark:text-slate-100">Referrer URL:</strong> How you found our service</li>
            <li><strong class="text-slate-900 dark:text-slate-100">Pages visited:</strong> Basic navigation analytics</li>
            <li><strong class="text-slate-900 dark:text-slate-100">Time and date of visit:</strong> For usage patterns</li>
          </ul>
        </div>
      </section>

      <!-- 2. How We Use Your Information -->
      <section class="mb-8">
        <h2 class="text-2xl font-bold text-slate-900 dark:text-slate-100 mb-4">2. How We Use Your Information</h2>
        <div class="prose dark:prose-invert prose-slate max-w-none text-slate-700 dark:text-slate-300">
          <p>We use the information we collect to:</p>
          <ul class="space-y-2">
            <li><strong class="text-slate-900 dark:text-slate-100">Provide the Service:</strong> Generate documentation, manage your account, enforce usage limits</li>
            <li><strong class="text-slate-900 dark:text-slate-100">Process payments:</strong> Manage subscriptions and billing through Stripe</li>
            <li><strong class="text-slate-900 dark:text-slate-100">Communicate with you:</strong> Send transactional emails (verification, password reset, receipts)</li>
            <li><strong class="text-slate-900 dark:text-slate-100">Improve the Service:</strong> Analyze usage patterns to enhance features</li>
            <li><strong class="text-slate-900 dark:text-slate-100">Prevent fraud and abuse:</strong> Detect and prevent unauthorized access and usage limit circumvention</li>
            <li><strong class="text-slate-900 dark:text-slate-100">Comply with legal obligations:</strong> Respond to legal requests and enforce our Terms</li>
          </ul>
        </div>
      </section>

      <!-- 3. Data Processing and Storage -->
      <section class="mb-8">
        <h2 class="text-2xl font-bold text-slate-900 dark:text-slate-100 mb-4">3. Data Processing and Storage</h2>

        <h3 class="text-xl font-semibold text-slate-900 dark:text-slate-100 mt-4 mb-3">3.1 Code Processing (Privacy-First)</h3>
        <div class="prose dark:prose-invert prose-slate max-w-none text-slate-700 dark:text-slate-300">
          <p>
            <strong class="text-slate-900 dark:text-slate-100">Your code is processed in memory only and is NEVER stored on our servers.</strong> Here's how it works:
          </p>
          <ul class="space-y-2">
            <li>You upload or paste code in your browser</li>
            <li>Code is sent to our server via encrypted connection (HTTPS)</li>
            <li>Our server sends code to Claude API for analysis</li>
            <li>Claude generates documentation and returns it to our server</li>
            <li>Our server sends documentation directly to your browser</li>
            <li><strong class="text-slate-900 dark:text-slate-100">Code and documentation are purged from memory immediately</strong></li>
          </ul>
          <p class="mt-4 font-medium text-purple-700 dark:text-purple-300">
            We have zero visibility into your code after processing. It is not logged, stored, or retained in any form.
          </p>
        </div>

        <h3 class="text-xl font-semibold text-slate-900 dark:text-slate-100 mt-6 mb-3">3.2 Database Storage</h3>
        <div class="prose dark:prose-invert prose-slate max-w-none text-slate-700 dark:text-slate-300">
          <p>We store the following in our Neon PostgreSQL database:</p>
          <ul class="space-y-2">
            <li><strong class="text-slate-900 dark:text-slate-100">Account data:</strong> Email, password hash, name, tier, GitHub ID</li>
            <li><strong class="text-slate-900 dark:text-slate-100">Usage data:</strong> Generation counts, IP addresses (anonymous users only)</li>
            <li><strong class="text-slate-900 dark:text-slate-100">Subscription data:</strong> Stripe customer ID, subscription status, billing dates</li>
            <li><strong class="text-slate-900 dark:text-slate-100">Email verification tokens:</strong> Temporary (24-hour expiration)</li>
            <li><strong class="text-slate-900 dark:text-slate-100">Password reset tokens:</strong> Temporary (1-hour expiration), hashed with SHA-256</li>
          </ul>
          <p class="mt-4">
            All data is stored in secure, encrypted databases hosted by Neon (AWS infrastructure, SOC 2 Type II certified).
          </p>
        </div>

        <h3 class="text-xl font-semibold text-slate-900 dark:text-slate-100 mt-6 mb-3">3.3 Third-Party Services</h3>
        <div class="prose dark:prose-invert prose-slate max-w-none text-slate-700 dark:text-slate-300">
          <p>We use the following third-party services that process your data:</p>
          <ul class="space-y-2">
            <li>
              <strong class="text-slate-900 dark:text-slate-100">Anthropic Claude API:</strong> Processes your code to generate documentation (privacy-first, no training)
            </li>
            <li>
              <strong class="text-slate-900 dark:text-slate-100">Stripe:</strong> Payment processing (PCI DSS Level 1 compliant)
            </li>
            <li>
              <strong class="text-slate-900 dark:text-slate-100">Resend:</strong> Transactional email delivery (verification, password reset, receipts)
            </li>
            <li>
              <strong class="text-slate-900 dark:text-slate-100">Neon:</strong> PostgreSQL database hosting (AWS infrastructure, encrypted at rest)
            </li>
            <li>
              <strong class="text-slate-900 dark:text-slate-100">Vercel:</strong> Application hosting and deployment (AWS/GCP infrastructure)
            </li>
            <li>
              <strong class="text-slate-900 dark:text-slate-100">GitHub:</strong> OAuth authentication (optional, only if you choose to sign up via GitHub)
            </li>
          </ul>
        </div>
      </section>

      <!-- 4. Data Sharing and Disclosure -->
      <section class="mb-8">
        <h2 class="text-2xl font-bold text-slate-900 dark:text-slate-100 mb-4">4. Data Sharing and Disclosure</h2>
        <div class="prose dark:prose-invert prose-slate max-w-none text-slate-700 dark:text-slate-300">
          <p>
            <strong class="text-slate-900 dark:text-slate-100">We do not sell, rent, or trade your personal information.</strong> We only share your data in the
            following limited circumstances:
          </p>
          <ul class="space-y-2">
            <li>
              <strong class="text-slate-900 dark:text-slate-100">Service providers:</strong> Third-party services necessary to operate (Stripe, Resend, Claude API, Neon, Vercel)
            </li>
            <li>
              <strong class="text-slate-900 dark:text-slate-100">Legal compliance:</strong> When required by law, subpoena, or court order
            </li>
            <li>
              <strong class="text-slate-900 dark:text-slate-100">Business transfers:</strong> In the event of a merger, acquisition, or sale of assets (you will be notified)
            </li>
            <li>
              <strong class="text-slate-900 dark:text-slate-100">Fraud prevention:</strong> To protect against fraud, abuse, or security threats
            </li>
          </ul>
        </div>
      </section>

      <!-- 5. Data Retention -->
      <section class="mb-8">
        <h2 class="text-2xl font-bold text-slate-900 dark:text-slate-100 mb-4">5. Data Retention</h2>
        <div class="prose dark:prose-invert prose-slate max-w-none text-slate-700 dark:text-slate-300">
          <ul class="space-y-2">
            <li><strong class="text-slate-900 dark:text-slate-100">Account data:</strong> Retained until you delete your account</li>
            <li><strong class="text-slate-900 dark:text-slate-100">Usage data:</strong> Retained for 12 months for quota enforcement and analytics</li>
            <li><strong class="text-slate-900 dark:text-slate-100">Code and documentation:</strong> <strong class="text-slate-900 dark:text-slate-100">NOT retained</strong> (processed in memory only)</li>
            <li><strong class="text-slate-900 dark:text-slate-100">Email verification tokens:</strong> Deleted after 24 hours or upon verification</li>
            <li><strong class="text-slate-900 dark:text-slate-100">Password reset tokens:</strong> Deleted after 1 hour or upon password reset</li>
            <li><strong class="text-slate-900 dark:text-slate-100">Transaction records:</strong> Retained for 7 years for tax and accounting purposes</li>
          </ul>
        </div>
      </section>

      <!-- 6. Your Rights (GDPR & Privacy) -->
      <section class="mb-8">
        <h2 class="text-2xl font-bold text-slate-900 dark:text-slate-100 mb-4">6. Your Rights (GDPR & Privacy)</h2>
        <div class="prose dark:prose-invert prose-slate max-w-none text-slate-700 dark:text-slate-300">
          <p>You have the following rights regarding your personal data:</p>
          <ul class="space-y-2">
            <li><strong class="text-slate-900 dark:text-slate-100">Access:</strong> Request a copy of the personal data we hold about you</li>
            <li><strong class="text-slate-900 dark:text-slate-100">Correction:</strong> Request correction of inaccurate or incomplete data</li>
            <li><strong class="text-slate-900 dark:text-slate-100">Deletion:</strong> Request deletion of your account and associated data ("right to be forgotten")</li>
            <li><strong class="text-slate-900 dark:text-slate-100">Export:</strong> Request a machine-readable export of your data (data portability)</li>
            <li><strong class="text-slate-900 dark:text-slate-100">Object:</strong> Object to processing of your data for certain purposes</li>
            <li><strong class="text-slate-900 dark:text-slate-100">Restrict:</strong> Request restriction of processing under certain circumstances</li>
            <li><strong class="text-slate-900 dark:text-slate-100">Withdraw consent:</strong> Withdraw consent for data processing (where applicable)</li>
          </ul>
          <p class="mt-4">
            To exercise these rights, contact us at{' '}
            <a href="mailto:support@codescribeai.com" class="text-purple-600 hover:text-purple-700 dark:text-purple-400 dark:hover:text-purple-300">
              support@codescribeai.com
            </a>
            . We will respond within 30 days.
          </p>
        </div>
      </section>

      <!-- 7. Security -->
      <section class="mb-8">
        <h2 class="text-2xl font-bold text-slate-900 dark:text-slate-100 mb-4">7. Security</h2>
        <div class="prose dark:prose-invert prose-slate max-w-none text-slate-700 dark:text-slate-300">
          <p>We implement industry-standard security measures to protect your data:</p>
          <ul class="space-y-2">
            <li><strong class="text-slate-900 dark:text-slate-100">Encryption in transit:</strong> All data transmitted via HTTPS (TLS 1.3)</li>
            <li><strong class="text-slate-900 dark:text-slate-100">Encryption at rest:</strong> Database encrypted by Neon (AES-256)</li>
            <li><strong class="text-slate-900 dark:text-slate-100">Password hashing:</strong> Bcrypt with 10 salt rounds (industry standard)</li>
            <li><strong class="text-slate-900 dark:text-slate-100">Token hashing:</strong> Password reset tokens hashed with SHA-256</li>
            <li><strong class="text-slate-900 dark:text-slate-100">Rate limiting:</strong> Protection against brute force attacks</li>
            <li><strong class="text-slate-900 dark:text-slate-100">JWT tokens:</strong> Secure session management with 7-day expiration</li>
            <li><strong class="text-slate-900 dark:text-slate-100">Environment isolation:</strong> Production secrets stored securely in Vercel</li>
          </ul>
          <p class="mt-4">
            However, no method of transmission or storage is 100% secure. We cannot guarantee absolute security, but we
            continuously monitor and improve our security practices.
          </p>
        </div>
      </section>

      <!-- 8. Cookies and Tracking -->
      <section class="mb-8">
        <h2 class="text-2xl font-bold text-slate-900 dark:text-slate-100 mb-4">8. Cookies and Tracking</h2>
        <div class="prose dark:prose-invert prose-slate max-w-none text-slate-700 dark:text-slate-300">
          <p>We use minimal cookies and tracking:</p>
          <ul class="space-y-2">
            <li>
              <strong class="text-slate-900 dark:text-slate-100">Session cookie:</strong> Maintains your login state (HTTP-only, expires after 7 days or logout)
            </li>
            <li>
              <strong class="text-slate-900 dark:text-slate-100">localStorage:</strong> Stores JWT token and user preferences (theme, billing period) locally in your browser
            </li>
            <li>
              <strong class="text-slate-900 dark:text-slate-100">No third-party tracking cookies:</strong> We do not use Google Analytics, Facebook Pixel, or similar tracking
            </li>
          </ul>
        </div>
      </section>

      <!-- 9. International Data Transfers -->
      <section class="mb-8">
        <h2 class="text-2xl font-bold text-slate-900 dark:text-slate-100 mb-4">9. International Data Transfers</h2>
        <div class="prose dark:prose-invert prose-slate max-w-none text-slate-700 dark:text-slate-300">
          <p>
            Our services are hosted on AWS infrastructure (via Neon and Vercel). Your data may be transferred to and
            processed in countries outside your country of residence. We ensure that all data transfers comply with
            applicable data protection laws, including GDPR.
          </p>
        </div>
      </section>

      <!-- 10. Children's Privacy -->
      <section class="mb-8">
        <h2 class="text-2xl font-bold text-slate-900 dark:text-slate-100 mb-4">10. Children's Privacy</h2>
        <div class="prose dark:prose-invert prose-slate max-w-none text-slate-700 dark:text-slate-300">
          <p>
            Our Service is intended for users aged 13 and older. We do not knowingly collect personal information from
            children under 13. If you are a parent or guardian and believe your child has provided us with personal
            information, please contact us immediately.
          </p>
        </div>
      </section>

      <!-- 11. Changes to Privacy Policy -->
      <section class="mb-8">
        <h2 class="text-2xl font-bold text-slate-900 dark:text-slate-100 mb-4">11. Changes to Privacy Policy</h2>
        <div class="prose dark:prose-invert prose-slate max-w-none text-slate-700 dark:text-slate-300">
          <p>
            We may update this Privacy Policy from time to time. When we make changes, we will:
          </p>
          <ul class="space-y-2">
            <li>Update the "Effective Date" and "Version" at the top of this page</li>
            <li>Notify you via email or through the Service</li>
            <li>Require you to accept the new Privacy Policy before continuing to use the Service</li>
          </ul>
          <p class="mt-4">
            Your continued use of the Service after accepting the new Privacy Policy constitutes your agreement to be bound by it.
          </p>
        </div>
      </section>

      <!-- 12. Contact Us -->
      <section class="mb-8">
        <h2 class="text-2xl font-bold text-slate-900 dark:text-slate-100 mb-4">12. Contact Us</h2>
        <div class="prose dark:prose-invert prose-slate max-w-none text-slate-700 dark:text-slate-300">
          <p>
            If you have any questions about this Privacy Policy or our data practices, please contact us at:
          </p>
          <p class="font-medium">
            Email:{' '}
            <a href="mailto:support@codescribeai.com" class="text-purple-600 hover:text-purple-700 dark:text-purple-400 dark:hover:text-purple-300">
              support@codescribeai.com
            </a>
          </p>
          <p class="font-medium">
            Website:{' '}
            <a href="https://codescribeai.com" class="text-purple-600 hover:text-purple-700 dark:text-purple-400 dark:hover:text-purple-300">
              https://codescribeai.com
            </a>
          </p>
        </div>
      </section>
    </div>

    <!-- Back to home link -->
    <div class="text-center mt-8">
      <a href="/" class="text-purple-600 hover:text-purple-700 dark:text-purple-400 dark:hover:text-purple-300 font-medium">
        ‚Üê Back to Home
      </a>
    </div>
  </div>
</BaseLayout>
